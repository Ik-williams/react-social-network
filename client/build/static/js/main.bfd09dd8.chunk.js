(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(68)},36:function(e,t,a){},52:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},53:function(e,t){e.exports="data:image/png;base64,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"},66:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(27),r=a.n(s),i=(a(36),a(3)),o=a(4),c=a(6),m=a(5),u=a(7),d=a(15),p=a.n(d),f=(a(49),a(50),a(51),p.a.initializeApp({apiKey:"AIzaSyAlRpGQL-iX0UOv2Wssir2bIIKaYpPG-iw",authDomain:"react-social-network-7e88b.firebaseapp.com",databaseURL:"https://react-social-network-7e88b.firebaseio.com",projectId:"react-social-network-7e88b",storageBucket:"react-social-network-7e88b.appspot.com",messagingSenderId:"906593123724"}));p.a.firestore().settings({timestampsInSnapshots:!0});var g=a(71),h=a(74),E=a(73),v=a(72),b=a(70),N=(a(52),a(53),function(e){return l.a.createElement("nav",{className:"navbar is-fixed-top",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement(b.a,{to:"/",className:"navbar-item"},l.a.createElement("img",{src:"https://bulma.io/images/bulma-logo.png",alt:"",width:"112",height:"28"}))),l.a.createElement("div",{className:"navbar-start",id:"search-nav"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("p",{className:"control"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Search"})))),l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},function(t){var a="/u/"+e.logged;return t?l.a.createElement("div",null,l.a.createElement(b.a,{to:"/upload",className:"button is-primary"},"Upload"),l.a.createElement(b.a,{to:"/login",onClick:function(){f.auth().signOut().then(function(){e.updateAuthLogged(!1,null,null)},function(e){alert("Sign Out Error",e)})},className:"button is-light"},"Sign out"),l.a.createElement("div",{className:"dropdown is-hoverable is-right"},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu3"},l.a.createElement("span",{className:"icon is-small"},l.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),l.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},l.a.createElement(b.a,{to:a,className:"dropdown-item"},"My Profile"),l.a.createElement(b.a,{to:"/settings",className:"dropdown-item"},"Settings"))))):l.a.createElement("div",null,l.a.createElement(b.a,{to:"/register",className:"button is-primary"},l.a.createElement("strong",null,"Sign up")),l.a.createElement(b.a,{to:"/login",className:"button is-light"},"Log in"))}(e.logged)))))}),w=a(12),k=a(20),S=function(e){var t=e.data.map(function(e,t){var a="/p/"+e.id;return l.a.createElement("div",{key:t,className:"user-content image is-square"},l.a.createElement(b.a,{to:a},l.a.createElement("img",{src:e.image,alt:""})))});return l.a.createElement("div",{className:"grid"},t)},y=function(e){var t=e.data.map(function(e,t){var a="/p/"+e.id;return l.a.createElement("div",{key:t,className:"user-content image is-square"},l.a.createElement(b.a,{to:a},l.a.createElement("img",{src:e.image,alt:""})))});return l.a.createElement("div",{className:"grid"},t)},A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){f.database().ref("/profile/".concat(a.state.username)).once("value",function(e){e.val()?(a.setState({description:e.val().description,followers_num:e.val().followers_num,following_num:e.val().following_num}),a.updateProfilePic(),a.updatesPhotos(),a.updateLikedPhotos()):a.setState({redirect:!0})}),f.database().ref("/profile/".concat(a.props.logged,"/following")).orderByChild("username").equalTo(a.state.username).once("value",function(e){e.val()&&a.setState({follow:!0})})},a.updateProfilePic=function(){f.storage().ref("profile/".concat(a.state.username)).child("profile").getDownloadURL().then(function(e){a.setState({profile_pic:e})}).catch(function(e){a.setState({profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media"})})},a.updatesPhotos=function(){f.database().ref("/posts").orderByChild("username").equalTo(a.state.username).once("value",function(e){e.val()&&(a.setState({posts_num:e.numChildren()}),Object.entries(e.val()).forEach(function(e){var t=Object(k.a)(e,2),n=t[0],l=t[1];l.id=n,a.setState({photos:Object(w.a)(a.state.photos).concat([l])})}))})},a.updateLikedPhotos=function(){f.database().ref("/profile/".concat(a.state.username,"/liked")).once("value",function(e){e.val()&&e.forEach(function(e){f.database().ref("/posts/".concat(e.val().post)).once("value",function(t){if(t.val()){var n={id:e.val().post,image:t.val().image};a.setState({liked:Object(w.a)(a.state.liked).concat([n])})}})})})},a.handleTab=function(){"posts"==a.state.mode?(a.tab_posts.classList.remove("is-active"),a.tab_likes.classList.add("is-active"),a.setState({mode:"likes"})):"likes"==a.state.mode&&(a.tab_likes.classList.remove("is-active"),a.tab_posts.classList.add("is-active"),a.setState({mode:"posts"}))},a.handleFollow=function(){a.props.logged?a.state.follow?(f.database().ref("/profile/".concat(a.props.logged,"/following")).orderByChild("username").equalTo(a.state.username).on("child_added",function(e){e.val()&&e.val().username===a.state.username&&(e.ref.remove(),f.database().ref("/profile/".concat(a.props.logged,"/following_num")).transaction(function(e){return e-1}),a.setState({follow:!1,followers_num:a.state.followers_num-1}))}),f.database().ref("/profile/".concat(a.state.username,"/followers")).orderByChild("username").equalTo(a.props.logged).on("child_added",function(e){e.val()&&e.val().username===a.props.logged&&(e.ref.remove(),f.database().ref("/profile/".concat(a.state.username,"/followers_num")).transaction(function(e){return e-1}))})):(f.database().ref("/profile/".concat(a.props.logged,"/following")).push({username:a.state.username}).then(function(){f.database().ref("/profile/".concat(a.props.logged,"/following_num")).transaction(function(e){return e+1}),a.setState({follow:!0,followers_num:a.state.followers_num+1})}),f.database().ref("/profile/".concat(a.state.username,"/followers")).push({username:a.props.logged}).then(function(){f.database().ref("/profile/".concat(a.state.username,"/followers_num")).transaction(function(e){return e+1})})):alert("You must be logged in to do that.")},a.state={mode:"posts",profile_pic:void 0,username:e.match.params.username,description:void 0,posts_num:0,followers_num:0,following_num:0,follow:!1,photos:[],liked:[],redirect:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(v.a,{to:"/error"}):l.a.createElement("div",{className:"profile"},l.a.createElement("div",{className:"card"},l.a.createElement("header",{className:"card-header"},l.a.createElement("figure",{className:"image profile-avatar"},l.a.createElement("img",{className:"is-rounded",src:this.state.profile_pic,alt:""})),l.a.createElement("div",{className:"card-header-content profile-info"},l.a.createElement("h1",{className:"title"},this.state.username),l.a.createElement("div",{className:"stats"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",{className:"post_num"},this.state.posts_num)," posts"),l.a.createElement("li",null,l.a.createElement("span",{className:"follower_num"},this.state.followers_num)," followers"),l.a.createElement("li",null,l.a.createElement("span",{className:"following_num"},this.state.following_num)," following"))),l.a.createElement("p",null,this.state.description),l.a.createElement("div",{className:"profile-options"},this.state.follow?l.a.createElement("button",{onClick:this.handleFollow,className:"button is-primary is-small"},"Unfollow"):l.a.createElement("button",{onClick:this.handleFollow,className:"button is-primary is-outline is-small"},"Follow")))),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"tabs is-centered"},l.a.createElement("ul",null,l.a.createElement("li",{ref:function(t){return e.tab_posts=t},className:"tab-posts is-active",onClick:this.handleTab},l.a.createElement("a",null,"Posts")),l.a.createElement("li",{ref:function(t){return e.tab_likes=t},className:"tab-likes",onClick:this.handleTab},l.a.createElement("a",null,"Liked")))),"posts"==this.state.mode?l.a.createElement(S,{data:this.state.photos}):l.a.createElement(y,{data:this.state.liked}))))}}]),t}(n.Component),j=a(28),C=function(e){var t=e.data.map(function(e,t){var a=void 0!=e.last_update?j(e.last_update).fromNow():"never";return l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement("div",{className:"media"},l.a.createElement("figure",{className:"image is-32x32"},l.a.createElement("img",{src:e.profile_pic,alt:""})),l.a.createElement("div",{className:"media-right"},l.a.createElement(b.a,{to:"/u/".concat(e.username)},e.username)))),l.a.createElement("td",null,a))});return l.a.createElement("div",{className:"updates"},l.a.createElement("div",{className:"panel-block",style:{padding:"0px"}},l.a.createElement("table",{className:"table is-striped is-fullwidth"},l.a.createElement("tbody",null,0==e.data&&l.a.createElement("tr",null,l.a.createElement("td",{className:"has-text-centered"},"There are no updates")),t))))},_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){a.props.following.forEach(function(e){f.database().ref("/profile/".concat(e)).once("value",function(t){t.val()&&f.storage().ref("profile/".concat(e)).child("profile").getDownloadURL().then(function(e){var n={profile_pic:e,username:t.key,last_update:t.val().last_update};a.setState({data:Object(w.a)(a.state.data).concat([n])})}).catch(function(e){var n={profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media",username:t.key,last_update:t.val().last_update};a.setState({data:Object(w.a)(a.state.data).concat([n])})})})}),a.setState({loading:!1})},a.state={data:[],loading:!0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.state.loading?null:l.a.createElement("div",{className:"sidebar"},l.a.createElement("nav",{className:"panel",styles:"background-color: white;"},l.a.createElement("p",{className:"panel-heading has-text-centered"},"Updates"),l.a.createElement(C,{data:this.state.data})))}}]),t}(n.Component),O=function(e){var t=e.data.map(function(e,t){var a="/u/"+e.username;return l.a.createElement("li",{key:t},l.a.createElement("span",{className:"comment-username"},l.a.createElement(b.a,{to:a},e.username))," ",l.a.createElement("span",{className:"comment"},e.comment))});return l.a.createElement("div",{className:"comments"},l.a.createElement("ul",null,t))},x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){f.database().ref("/posts/".concat(a.state.post_id)).once("value",function(e){e.val()?a.updatePost(e):a.props.updateRedirect(!0,"error")}).then(function(){f.storage().ref("profile/".concat(a.state.username)).child("profile").getDownloadURL().then(function(e){a.setState({profile_pic:e})}).catch(function(e){a.setState({profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media"})})}),f.database().ref("/posts/".concat(a.state.post_id,"/liked")).orderByChild("username").equalTo(a.props.logged).once("value",function(e){e.val()&&a.setState({liked:!0})}),f.database().ref("/comments/".concat(a.state.post_id)).once("value",function(e){e.val()&&Object.entries(e.val()).forEach(function(e){var t=Object(k.a)(e,2),n=(t[0],t[1]);a.setState({comments:Object(w.a)(a.state.comments).concat([n])})})})},a.updatePost=function(e){a.setState({username:e.val().username,description:e.val().description,time:new Date(e.val().time).toDateString(),image:e.val().image,likes_num:e.val().like_num})},a.handleLike=function(){a.props.logged?a.state.liked?f.database().ref("/posts/".concat(a.state.post_id,"/liked")).orderByChild("username").equalTo(a.props.logged).once("value",function(e){e.val()&&e.forEach(function(e){if(e.val().username===a.state.username)return e.ref.remove(),f.database().ref("/posts/".concat(a.state.post_id,"/like_num")).transaction(function(e){return e-1}),a.setState({liked:!1,likes_num:a.state.likes_num-1}),void f.database().ref("/profile/".concat(a.props.logged,"/liked")).orderByChild("post").equalTo(a.state.post_id).once("value",function(e){e.val()&&e.forEach(function(e){e.val().post!=a.state.post_id||e.ref.remove()})})})}):f.database().ref("/posts/".concat(a.state.post_id,"/liked")).push({username:a.props.logged}).then(function(e){f.database().ref("/posts/".concat(a.state.post_id,"/like_num")).transaction(function(e){return e+1}),a.setState({liked:!0,likes_num:a.state.likes_num+1}),f.database().ref("/profile/".concat(a.props.logged,"/liked")).push({post:a.state.post_id})}).catch(function(e){console.log(e)}):alert("You must be logged in to do that.")},a.handleDelete=function(){window.confirm("Are you sure you want to delete this photo?")&&f.database().ref("/posts").child(a.state.post_id).remove().then(function(){alert("Photo deleted!"),a.setState({render:!1})}),a.props.updateRedirect&&a.props.updateRedirect(!0,"profile")},a.handleSave=function(){f.database().ref("/posts/".concat(a.state.post_id,"/description")).set(a.state.description).then(function(){a.setState({edit:!1}),alert("saved")}).catch(function(e){alert(e)})},a.handleEdit=function(){a.setState({edit:!0})},a.handleEditChange=function(e){a.setState({description:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.logged?f.database().ref("/comments").child(a.state.post_id).push({username:a.props.logged,comment:a.input.value}).then(function(e){var t={username:a.props.logged,comment:a.input.value};a.setState({comments:Object(w.a)(a.state.comments).concat([t])}),a.input.value=""}).catch(function(e){console.log(e)}):alert("You must be logged in to do that.")},a.displayLikesNum=function(){return 1==a.state.likes_num?l.a.createElement("span",{className:"likes-num"},a.state.likes_num," ",l.a.createElement("label",null,"like")):l.a.createElement("span",{className:"likes-num"},a.state.likes_num," ",l.a.createElement("label",null,"likes"))},a.displayPhotosDropdown=function(){return a.state.username==a.props.logged?l.a.createElement("div",{className:"dropdown is-hoverable is-right is-small photo-dropdown"},l.a.createElement("div",{className:"dropdown-trigger"},l.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu3"},l.a.createElement("span",{className:"icon is-small",style:{height:"0px"}},l.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),l.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},l.a.createElement("a",{onClick:a.handleEdit,className:"dropdown-item"},"Edit"),l.a.createElement("a",{onClick:a.handleDelete,className:"dropdown-item"},"Delete")))):null},a.state={username:void 0,profile_pic:void 0,time:void 0,description:void 0,edit:!1,post_id:e.post_id,image:void 0,comments:[],likes_num:0,liked:!1,render:!0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(v.a,{to:"/error"}):this.state.render?l.a.createElement("div",{className:"post"},l.a.createElement("div",{className:"card"},l.a.createElement("header",null,l.a.createElement("div",{className:"media is-fullwidth"},l.a.createElement("figure",{className:"image is-48x48"},l.a.createElement("img",{src:this.state.profile_pic,alt:""})),l.a.createElement("p",{className:"card-header-title content-username"},l.a.createElement(b.a,{to:"/u/".concat(this.state.username)},this.state.username)),l.a.createElement(b.a,{target:"_blank",to:"/p/".concat("".concat(this.state.post_id))},l.a.createElement("button",{className:"button is-light is-small is-pulled-right share"},"Share")),this.displayPhotosDropdown())),l.a.createElement("div",{className:"card-image"},l.a.createElement("figure",{className:"image"},l.a.createElement("img",{src:this.state.image,alt:""}))),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"content-options"},this.state.liked?l.a.createElement("button",{onClick:this.handleLike,className:"button is-danger is-small"},"Unlike"):l.a.createElement("button",{onClick:this.handleLike,className:"button is-danger is-outlined is-small"},"Like"),this.state.likes_num>0&&l.a.createElement("span",{className:"likes-num"},this.state.likes_num," ",l.a.createElement("label",null,"likes")),l.a.createElement("time",{className:"content-time"},this.state.time)),l.a.createElement("div",{className:"content-body",ref:function(t){return e.desc=t}},this.state.edit?l.a.createElement("div",null,l.a.createElement("textarea",{class:"textarea",rows:"1",onChange:this.handleEditChange},this.state.description),l.a.createElement("div",{class:"field is-grouped edit-buttons"},l.a.createElement("p",{class:"control"},l.a.createElement("button",{class:"button is-primary is-small",onClick:this.handleSave},"Save")),l.a.createElement("p",{class:"control"},l.a.createElement("button",{class:"button is-primary is-small",onClick:function(){return e.setState({edit:!1})}},"Cancel")))):this.state.description),l.a.createElement("hr",null),this.props.logged&&l.a.createElement(O,{data:this.state.comments}),l.a.createElement("form",{onSubmit:this.handleSubmit,style:{display:this.props.logged?"block":"none"}},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control is-expanded"},l.a.createElement("input",{ref:function(t){return e.input=t},className:"input",type:"text",placeholder:"Add a comment"})),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary",type:"submit"},"Submit")))))))):null}}]),t}(n.Component),L=function(e){var t=e.data.map(function(t,a){return l.a.createElement(x,{key:a,logged:e.logged,post_id:t})});return l.a.createElement("div",{className:"posts"},0==e.data&&l.a.createElement("p",null,"There are no posts."),t)},U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){f.database().ref("/profile/".concat(a.props.logged,"/following")).once("value",function(e){e.val()?(e.forEach(function(e){a.setState({following_list:Object(w.a)(a.state.following_list).concat([e.val().username])})}),a.state.following_list.forEach(function(e){f.database().ref("/posts").orderByChild("username").equalTo(e).once("value",function(e){e.val()&&e.forEach(function(e){a.setState({post_list:Object(w.a)(a.state.post_list).concat([e.key])})})})}),a.setState({loading:!1})):a.setState({loading:!1})})},a.state={loading:!0,following_list:[],post_list:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.following_list,a=e.post_list;return e.loading?l.a.createElement("div",null,"loading..."):l.a.createElement("div",{className:"main"},l.a.createElement("div",{className:"grid-container"},l.a.createElement(_,{following:t,logged:this.props.logged}),l.a.createElement(L,{data:a,logged:this.props.logged})))}}]),t}(n.Component),B=a(29),R=a.n(B),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){if(e.target.files){var t=e.target.files[0].type,n=e.target.files[0].name;if(t.includes("image")){a.setState({file:e.target.files[0]});var l=new FileReader;l.onload=function(e){document.querySelector("#preview").setAttribute("src",e.target.result),document.querySelector(".file-name").innerText=n},l.readAsDataURL(e.target.files[0])}else alert("File must be a picture. Try again")}},a.handleUpload=function(e){if(a.state.file){var t=a.state.file,n=t.type.split("/")[1],l=R.a.generate(),s=l+"."+n,r=f.storage().ref("/images/".concat(a.props.logged,"/").concat(s)).put(t);a.setState({progress:!0}),r.on("state_changed",function(e){a.progress.value=e.bytesTransferred/e.totalBytes*100},function(e){console.log(e)},function(){f.storage().ref("images/".concat(a.props.logged)).child(s).getDownloadURL().then(function(e){var t=document.querySelector("#description").value;f.database().ref("/posts").child(l).set({username:a.props.logged,time:p.a.database.ServerValue.TIMESTAMP,description:t,image:e}).then(function(e){f.database().ref("/profile/".concat(a.props.logged,"/last_update")).set(p.a.database.ServerValue.TIMESTAMP),a.setState({redirect:!0,uuid:l})})})})}else alert("Select an image before submitting")},a.state={file:null,uuid:void 0,redirect:!1,progress:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(this.state.redirect){var t="/p/"+this.state.uuid;return l.a.createElement(v.a,{to:t})}return l.a.createElement("div",{className:"upload"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("p",{className:"card-header-title is-centered"},"Upload image")),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"file has-name is-centered"},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:this.handleChange}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement("i",{className:"fas fa-upload"})),l.a.createElement("span",{className:"file-label"},"Choose a file\u2026")),l.a.createElement("span",{className:"file-name"},"None"))),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("img",{className:"is-center is-rounded",id:"preview",alt:"",src:""})),l.a.createElement("br",null),l.a.createElement("progress",{className:"progress is-primary",ref:function(t){return e.progress=t},style:{display:!0===this.state.progress?"block":"none"},max:"100"}),l.a.createElement("textarea",{id:"description",className:"textarea",placeholder:"Description"}),l.a.createElement("br",null),l.a.createElement("button",{className:"button is-primary",onClick:this.handleUpload},"Submit"))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),f.auth().signInWithEmailAndPassword(a.email.value,a.pass.value).then(function(e){a.props.updateAuthLogged(!0,e.user.displayName,e.user.uid)}).catch(function(e){alert(e.message)})},a.state={redirect:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(v.a,{to:"/"}):l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("p",{className:"card-header-title is-centered"},"Login")),l.a.createElement("div",{className:"card-content"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{ref:function(t){return e.email=t},className:"input is-centered",type:"email",placeholder:"Email"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{ref:function(t){return e.pass=t},className:"input is-centered",type:"password",placeholder:"Password"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"button is-primary is-fullwidth"},"Enter")))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateLogged=function(e){a.props.updateLogged(e),a.setState({redirect:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.user.value;f.database().ref("/profile/".concat(t)).once("value",function(e){e.val()?alert("Username already exists. Try Again."):f.auth().createUserWithEmailAndPassword(a.email.value,a.pass.value).then(function(e){f.database().ref("/profile").child(t).set({uid:e.user.uid,description:"No description",followers_num:0,following_num:0}).then(function(){e.user.updateProfile({displayName:t}).then(function(){a.updateLogged(t)})}),f.database().ref("/profile/".concat(t,"/following")).push({username:t})}).catch(function(e){alert(e.message)})})},a.state={registered:!1,selected_username:!1,redirect:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?l.a.createElement(v.a,{to:"/"}):l.a.createElement("div",{className:"register"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("p",{className:"card-header-title is-centered"},"Register")),l.a.createElement("div",{className:"card-content"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{ref:function(t){return e.email=t},className:"input is-centered",type:"email",placeholder:"Email"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{ref:function(t){return e.user=t},className:"input is-centered",type:"text",placeholder:"Username"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{ref:function(t){return e.pass=t},className:"input is-centered",type:"password",placeholder:"Password"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"button is-primary is-fullwidth"},"Enter")))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateRedirect=function(e,t){a.setState({redirect:e,redirect_loc:t})},a.state={redirect_loc:void 0,redirect:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.state.redirect&&"error"==this.state.redirect_loc?l.a.createElement(v.a,{to:"/error"}):this.state.redirect&&"profile"==this.state.redirect_loc?l.a.createElement(v.a,{to:"/u/".concat(this.props.logged)}):l.a.createElement("div",{className:"view"},l.a.createElement(x,{updateRedirect:this.updateRedirect,logged:this.props.logged,post_id:this.props.match.params.id}))}}]),t}(n.Component),T=function(){return l.a.createElement("div",{className:"error"},l.a.createElement("section",{className:"hero is-large is-primary"},l.a.createElement("div",{className:"hero-body"},l.a.createElement("div",{className:"container has-text-centered"},l.a.createElement("h1",{className:"title"},"404 Error"),l.a.createElement("h2",{className:"subtitle"},"Unable to find requested content"),l.a.createElement(b.a,{to:"/"},l.a.createElement("button",{className:"button is-light"},"Home"))))))},Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){f.storage().ref("profile/".concat(a.props.logged)).child("profile").getDownloadURL().then(function(e){a.setState({profile_pic:e})}).catch(function(e){a.setState({profile_pic:"https://firebasestorage.googleapis.com/v0/b/react-social-network-7e88b.appspot.com/o/assets%2Fdefault.png?alt=media"})}),f.database().ref("/profile/".concat(a.props.logged)).once("value",function(e){e.val()&&a.setState({bio:e.val().description})})},a.handleUpload=function(e){if(a.state.file){var t=f.storage().ref("/profile/".concat(a.props.logged,"/profile")).put(a.state.file);a.setState({progress:!0}),t.on("state_changed",function(e){a.progress.value=e.bytesTransferred/e.totalBytes*100},function(e){console.log(e)},function(){f.storage().ref("profile/".concat(a.props.logged)).child("profile").getDownloadURL().then(function(e){a.setState({profile_pic:e}),a.setState({progress:!1}),alert("Profile picture changed!")})})}else alert("Select an image before submitting")},a.handleUploadChange=function(e){if(e.target.files)if(e.target.files[0].type.includes("image")){var t=e.target.files[0].name;a.setState({file:e.target.files[0]});var n=new FileReader;n.onload=function(e){a.setState({pic_changed:!0}),a.setState({profile_pic:e.target.result}),document.querySelector(".file-name").innerText=t},n.readAsDataURL(e.target.files[0])}else alert("File must be a picture. Try again")},a.handleBioChange=function(e){a.setState({bio:e.target.value})},a.handleBioSave=function(e){f.database().ref("/profile/".concat(a.props.logged,"/description")).set(a.state.bio).then(function(){alert("Bio was changed!")}).catch(function(e){alert(e)})},a.state={profile_pic:void 0,bio:void 0,file:null,redirect:!1,progress:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(this.state.redirect){var t="/p/"+this.state.uuid;return l.a.createElement(v.a,{to:t})}return l.a.createElement("div",{className:"upload"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("p",{className:"card-header-title is-centered"},"Settings")),l.a.createElement("div",{className:"card-content"},l.a.createElement("label",{className:"label"},"Profile: "),l.a.createElement("article",{className:"media"},l.a.createElement("figure",{className:"media-left",ref:function(t){return e.profile=t}},l.a.createElement("p",{className:"image is-128x128"},l.a.createElement("img",{src:this.state.profile_pic}))),l.a.createElement("div",{className:"media-content"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"file has-name"},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:this.handleUploadChange}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement("i",{className:"fas fa-upload"})),l.a.createElement("span",{className:"file-label"},"Choose a file\u2026")),l.a.createElement("span",{className:"file-name"},"None"))),l.a.createElement("br",null),l.a.createElement("button",{className:"button is-primary",onClick:this.handleUpload},"Save Photo")))),l.a.createElement("progress",{className:"progress is-primary",ref:function(t){return e.progress=t},style:{display:!0===this.state.progress?"block":"none"},max:"100"}),l.a.createElement("hr",null),l.a.createElement("br",null),l.a.createElement("label",{className:"label"},"Biography: "),l.a.createElement("textarea",{id:"description",className:"textarea",placeholder:"Enter bio",value:this.state.bio,onChange:this.handleBioChange}),l.a.createElement("br",null),l.a.createElement("button",{className:"button is-primary",onClick:this.handleBioSave},"Save Bio"))))}}]),t}(n.Component),I=a(30);function Y(e){var t=e.component,a=e.authenticated,n=Object(I.a)(e,["component","authenticated"]);return l.a.createElement(E.a,Object.assign({},n,{render:function(e){return!0===a?l.a.createElement(t,Object.assign({},e,n)):l.a.createElement(v.a,{to:"/login"})}}))}a(66);var M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){fetch("/api/test").then(function(e){return e.json()}).then(function(e){return console.log(e)}).catch(function(){return console.log("Express backend not working")}),f.auth().onAuthStateChanged(function(e){e?a.setState({logged:e.displayName,uid:e.uid,authenticated:!0,loading:!1}):a.setState({logged:null,authenticated:!1,loading:!1,uid:null})})},a.updateAuth=function(e){a.setState({authenticated:e})},a.updateLogged=function(e){a.setState({logged:e})},a.updateAuthLogged=function(e,t,n){a.setState({authenticated:e,logged:t,uid:n})},a.state={logged:null,uid:null,authenticated:!1,loading:!0,selected:!1,test:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.logged,n=t.authenticated,s=t.uid;return t.loading?null:l.a.createElement(g.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(N,{auth:this.authenticated,logged:a,updateAuthLogged:this.updateAuthLogged}),l.a.createElement(h.a,null,l.a.createElement(Y,{exact:!0,path:"/",component:U,logged:a,authenticated:n}),l.a.createElement(Y,{exact:!0,path:"/upload",component:D,logged:a,authenticated:n}),l.a.createElement(Y,{exact:!0,path:"/settings",component:Q,logged:a,authenticated:n}),l.a.createElement(E.a,{path:"/login",render:function(){return n?l.a.createElement(v.a,{to:"/"}):l.a.createElement(P,{updateAuthLogged:e.updateAuthLogged})},exact:!0}),l.a.createElement(E.a,{path:"/register",render:function(){return n?l.a.createElement(v.a,{to:"/"}):l.a.createElement(W,{logged:a,updateLogged:e.updateLogged})},exact:!0}),l.a.createElement(E.a,{path:"/u/:username",render:function(e){return l.a.createElement(A,Object.assign({logged:a,uid:s},e))},exact:!0}),l.a.createElement(E.a,{path:"/p/:id",render:function(e){return l.a.createElement(J,Object.assign({logged:a},e))},exact:!0}),l.a.createElement(E.a,{path:"*",component:T}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.bfd09dd8.chunk.js.map